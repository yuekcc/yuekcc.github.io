import{e as a,h as n}from"/dist/chunk-n2t7x54v.js";function s(){return n("div",{class:"markdown-body",children:n(a,{children:[n("h3",{children:"Java 分层架构概念解析（以登录为例）"},void 0,!1,void 0,this),`
`,n("h4",{children:"1. 核心概念说明"},void 0,!1,void 0,this),`
`,n("table",{children:[n("thead",{children:n("tr",{children:[n("th",{children:"类型"},void 0,!1,void 0,this),n("th",{children:"职责"},void 0,!1,void 0,this),n("th",{children:"示例内容"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("tbody",{children:[n("tr",{children:[n("td",{children:"Entity"},void 0,!1,void 0,this),n("td",{children:"与数据库表结构一一对应"},void 0,!1,void 0,this),n("td",{children:"User (id,username,hashed_password)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("tr",{children:[n("td",{children:"DAO"},void 0,!1,void 0,this),n("td",{children:"数据库操作接口"},void 0,!1,void 0,this),n("td",{children:"UserDao.findByUsername()"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("tr",{children:[n("td",{children:"DTO"},void 0,!1,void 0,this),n("td",{children:"服务层与控制器层之间的数据传输对象"},void 0,!1,void 0,this),n("td",{children:"LoginDTO(username,rawPassword)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("tr",{children:[n("td",{children:"VO"},void 0,!1,void 0,this),n("td",{children:"返回给前端的展示数据（可能脱敏/格式化）"},void 0,!1,void 0,this),n("td",{children:"LoginVO(username,email,token)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),`
`,n("h4",{children:"2. 时序图"},void 0,!1,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-mermaid",children:[n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"sequenceDiagram"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    participant Frontend as 前端"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    participant Controller as LoginController"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    participant Service as UserService"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    participant DAO as UserRepository"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    participant Mapper as UserMapper"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Frontend->>Controller: POST /login (username/password)"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Controller->>Service: login(loginDTO)"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Service->>DAO: findByUsername(dto.username())"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    DAO-->>Service: Optional<UserEntity>"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Service->>Service: 验证密码哈希"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Service->>Service: 生成访问令牌"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Service->>Mapper: toVO(entity)"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Mapper-->>Service: UserVO"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Service-->>Controller: UserVO"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    Controller-->>Frontend: 200 OK (UserVO)"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("h4",{children:"3. 代码实现（基于 Spring Boot 3.2+）"},void 0,!1,void 0,this),`
`,n("h5",{children:"项目结构"},void 0,!1,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-log",children:[n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"src/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"├── main/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   ├── java/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │   └── com/example/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── controller/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── dto/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── entity/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── repository/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── service/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       ├── vo/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"│   │       └── mapper/"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("h5",{children:"具体代码文件"},void 0,!1,void 0,this),`
`,n("ol",{children:[`
`,n("li",{children:n("strong",{children:"Entity（持久化层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Data"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Entity"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Table"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"name"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:' "users"'},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" UserEntity"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Id"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"GeneratedValue"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"strategy"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" GenerationType.IDENTITY)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" Long id;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Column"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"unique"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" true"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"nullable"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" false"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" String username;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Column"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"nullable"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" false"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" String hashedPassword;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" String email;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"    // 其他字段..."},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"2",children:[`
`,n("li",{children:n("strong",{children:"DAO（数据访问层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" interface"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" UserRepository"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    extends"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" JpaRepository"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"<"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"UserEntity"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Long"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"> {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    Optional<"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"UserEntity"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"findByUsername"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(String "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"username"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"3",children:[`
`,n("li",{children:n("strong",{children:"DTO（数据传输对象）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" record"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" LoginDTO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"NotBlank"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" String username,"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"NotBlank"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Size"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"min"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"8"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") String rawPassword"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:") {}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"4",children:[`
`,n("li",{children:n("strong",{children:"VO（视图对象）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" record"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" LoginVO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    String username,"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    String email,"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    String accessToken"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:") {}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"5",children:[`
`,n("li",{children:n("strong",{children:"Mapper（转换层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Mapper"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"componentModel"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:' "spring"'},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" interface"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" UserMapper"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Mapping"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"target"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:' "accessToken"'},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"ignore"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" true"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    LoginVO "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"toVO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(UserEntity "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"entity"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" LoginVO "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"toVOWithToken"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(UserEntity "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"entity"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", String "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"token"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        LoginVO vo "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" toVO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(entity);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" LoginVO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            vo."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"username"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(),"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            vo."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"email"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(),"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"            token"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        );"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"6",children:[`
`,n("li",{children:n("strong",{children:"Service（业务逻辑层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Service"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"RequiredArgsConstructor"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" AuthService"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" UserRepository userRepository;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" PasswordEncoder passwordEncoder;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" UserMapper userMapper;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" JwtTokenGenerator tokenGenerator;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" LoginVO "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"login"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(LoginDTO "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"dto"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        UserEntity user "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" userRepository."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"findByUsername"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(dto."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"username"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"())"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            ."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"orElseThrow"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(() "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"->"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" UserNotFoundException"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(dto."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"username"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"()));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        if"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"!"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"passwordEncoder."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"matches"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(dto."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"rawPassword"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(), user."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"getHashedPassword"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"())) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"            throw"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" InvalidPasswordException"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        String token "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" tokenGenerator."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"generateToken"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(user."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"getUsername"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"());"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" userMapper."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"toVOWithToken"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(user, token);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("ol",{start:"7",children:[`
`,n("li",{children:n("strong",{children:"Controller（控制层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-java",children:[n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"RestController"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"RequestMapping"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:'"/api/auth"'},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"RequiredArgsConstructor"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" AuthController"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" AuthService authService;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"PostMapping"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:'"/login"'},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" ResponseEntity<"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"LoginVO"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"login"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(@"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"Valid"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" @"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"RequestBody"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" LoginDTO "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"dto"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" ResponseEntity."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"ok"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(authService."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"login"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(dto));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("h4",{children:"4. 关键实现说明"},void 0,!1,void 0,this),`
`,n("ol",{children:[`
`,n("li",{children:[`
`,n("p",{children:[n("strong",{children:"密码安全处理"},void 0,!1,void 0,this),`：
• 使用 BCryptPasswordEncoder 进行密码哈希验证
• 原始密码不会存储和传输到服务层之外`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("li",{children:[`
`,n("p",{children:[n("strong",{children:"DTO 验证"},void 0,!1,void 0,this),`：
• 使用 Jakarta Validation 注解进行输入校验
• 自动触发 MethodArgumentNotValidException`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("li",{children:[`
`,n("p",{children:[n("strong",{children:"映射策略"},void 0,!1,void 0,this),`：
• MapStruct 在编译时生成映射实现类
• 使用`,n("code",{children:"toVOWithToken"},void 0,!1,void 0,this),"实现带令牌的 VO 转换"]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("li",{children:[`
`,n("p",{children:[n("strong",{children:"JWT 集成"},void 0,!1,void 0,this),`：
• TokenGenerator 可自行实现或使用 Spring Security 的 JWT 库`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("h4",{children:"5. 推荐扩展方向"},void 0,!1,void 0,this),`
`,n("ol",{children:[`
`,n("li",{children:"在 Entity 与 DTO 之间增加一层领域对象（Domain Model）"},void 0,!1,void 0,this),`
`,n("li",{children:"添加 DTO 到 Entity 的逆向映射"},void 0,!1,void 0,this),`
`,n("li",{children:"使用 Spring Security 进行更完整的认证授权管理"},void 0,!1,void 0,this),`
`,n("li",{children:"在 VO 中添加 Swagger 注解完善 API 文档"},void 0,!1,void 0,this),`
`,n("li",{children:"实现 DTO 分组校验（如创建/更新使用不同校验规则）"},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this),`
`,n("hr",{},void 0,!1,void 0,this),`
`,n("ul",{children:[`
`,n("li",{children:"2025-04-16 by DeepSeek R1"},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}export{s as default};
