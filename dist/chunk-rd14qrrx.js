import{e as a,h as n}from"/dist/chunk-n2t7x54v.js";function s(){return n("div",{class:"markdown-body",children:n(a,{children:[n("h1",{children:"Vue 组件状态管理笔记"},void 0,!1,void 0,this),`
`,n("p",{children:"这里记录一下对状态管理的想法。"},void 0,!1,void 0,this),`
`,n("p",{children:`UI 组件通常是有状态的。所谓状态就是组件可以保存用户此时此刻的一些操作。比如，常见的开关组件。开关的状态至少有
【开】、【关】、【禁用】三种状态。这些状态的产生可能是基于数据生成，也可能是因为用户点击触发而发生改变。无论是何种原因
初始化或改变了原来状态，程序也需要记录相应的状态。`},void 0,!1,void 0,this),`
`,n("p",{children:"组件也有无状态的类型。【无状态】本身已经是一种状态，只是无需进行管理。无状态组件可以认为是纯粹的数据驱动。"},void 0,!1,void 0,this),`
`,n("p",{children:"但是 UI 本身总是有状态的。因为 UI 需要响应用户的操作，让组件维持在某些状态下。随着组件的规模增加，这就需要引入状态管理。"},void 0,!1,void 0,this),`
`,n("h2",{children:"基于 vuex 的状态管理"},void 0,!1,void 0,this),`
`,n("p",{children:`Vuex 是 vue 官方出品的状态管理工具。Vuex 可以理解为一个中心仓库，各个组件可以读取中心仓库的内容。Vuex 基于单向
数据流的设计思想，将数据的获取、更新统一交由 Vuex 去管理。通过 Vuex 提供的 modules 功能可以将状态管制在某个领域内。`},void 0,!1,void 0,this),`
`,n("p",{children:n("img",{src:"/images/vuex-core-concepts.png",alt:"Vuex 核心概念"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("p",{children:["但是在实际的项目中，我认为 Vuex 的这种设计会带来不少问题。首先是 Vuex 的概念是基于约定编写的。就是 Vuex 中 ",n("code",{children:"getter"},void 0,!1,void 0,this),`、
`,n("code",{children:"Mutations"},void 0,!1,void 0,this),"、",n("code",{children:"Actions"},void 0,!1,void 0,this),` 更多是开发人员之间互相约定。但是这种约定很容易会因为被项目的进度打破。由于 JavaScript 的协变特性，
在 Vuex 的 state 中定义的内容，很容易被直接更改。`]},void 0,!0,void 0,this),`
`,n("p",{children:[`当然在启动 Vuex 的严格模式后，理应可以解决这些问题。只是开发人员在项目进度、加班、优秀代码之间往往会选择项目进步，而进行
【飞线】操作。比如从某个 module 中获取状态：`,n("code",{children:"this.$store.module1.domain.someSubject.someField.someKey"},void 0,!1,void 0,this),`。
按 Vuex 的思想，应该使用 `,n("code",{children:"getter"},void 0,!1,void 0,this)," 来解决这样的问题。但是往往会选择直接获取，因为这样写更好理解。"]},void 0,!0,void 0,this),`
`,n("p",{children:`对于新接手项目的开发人员，Vuex 的代码也是雾里看花，不知所云。因为 Vuex 的模板代码太多了。而且 Vuex 在使用 JavaScript 的
动态特性实现注入组件中，更添神秘色彩。即使有 TypeScript 这样的工具，依然没有办法解决 Vuex，基于 Vue 的一些类型提示问题。`},void 0,!1,void 0,this),`
`,n("p",{children:`在书写【高水平代码】与【好理解代码】之间，我更倾向后者。而这样的选择也导致我在项目中不会主动去引入 Vuex 来解决所谓的多级
组件间的状态同步问题。尽量减少三方库的依赖也是我的追求。`},void 0,!1,void 0,this),`
`,n("h2",{children:"基于 createContext 实现的多领域状态管理"},void 0,!1,void 0,this),`
`,n("p",{children:"Vue 是没有提供 useContext 这样的 API，只能自己实现。npm 有可以用的库。createContext 源自 React。Vue 版本的 createContext 可以使用 provide/inject API 和 renderless 方式实现。"},void 0,!1,void 0,this),`
`,n("p",{children:"所谓 renderless 的组件是会直接渲染子功能，作为父组件，只用于实现部分逻辑功能。如："},void 0,!1,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-js",children:[n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"  render"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"h"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    return"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" this"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:".$scopedSlots."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"  },"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"};"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("p",{children:"这样就可以得到一个 renderless 组件。然后通过 provide API 可以向其子组件中注入部分状态，以实现逻辑、状态共享。"},void 0,!1,void 0,this),`
`,n("p",{children:"一个复杂的例子："},void 0,!1,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-js",children:[n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// token.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" const"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" CONTEXT_TOKEN"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" Symbol"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"'SOME_DOMAIN'"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// context.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    data"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            name: "},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"'tom'"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            age: "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"10"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }，"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    provide"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        const"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" vm"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" this"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            ["},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"CONTEXT_TOKEN"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"]: {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"                // 使用 get，保护数据不会被随意修改"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"                get"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" name"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"                    return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" vm.name;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"                },"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"                get"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" age"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"                    return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" vm.age;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"                }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"            }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    },"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    render"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"h"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" this"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:".$scopedSlots."},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"()"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// app.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"import"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {CONTEXT_TOKEN} "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"from"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:" './token'"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"    // 需要使用 context 时，需要注入 CONTEXT_TOKEN"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    inject: {"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        context: "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"CONTEXT_TOKEN"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    render"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(h) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        return "},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"h"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"'div'"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"null"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"`${"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"this"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"."},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"context"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"."},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"name"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"} is ${"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"this"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"."},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"context"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"."},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"age"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"} year(s) old`"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// some-domain-entry.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"import"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" Context "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"from"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:" './context'"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"import"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" App "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"from"},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:" './app'"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    components: {Context},"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    render"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"h"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" h"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(Context, "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"null"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", App)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("p",{children:`与中心化的 Vuex 不同，createContext 风格的状态管理需要自行实现不少代码，也需要考虑如何保持数据不被子组件直接修改。比起
Vuex 的几个概念，Context Provider 也只是一个普通的 Vue 组件，并没有修改太多新的东西。`},void 0,!1,void 0,this),`
`,n("p",{children:"在实践上，我更认中这种分不同 domain 的状态管理风格。一是状态不会扩散到全局中，二是状态的影响范围更加好控制。"},void 0,!1,void 0,this),`
`,n("h2",{children:"基于 Composition API 的状态管理"},void 0,!1,void 0,this),`
`,n("p",{children:"上面是使用 Vue2 实现的 domain 范围内的状态管理。事实上使用 Vue3 提供的 composition api 可以写出更优秀的 api。vue2 可以引入 composition api 插件实现类似的 api。"},void 0,!1,void 0,this),`
`,n("p",{children:"composition api 的优势是一是更好的类型推导，二是保持响应特性的同时可以减少无谓的干扰代码。如上面的 provide 实现。在 vue3 的 setup 函数中可以简化为："},void 0,!1,void 0,this),`
`,n("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:n("code",{className:"language-js",children:[n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// context.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"function"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" createContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"token"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    const"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" provideContext"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"initValue"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"=>"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        const"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" context"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" reactive"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(initValue)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"        provide"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(token, context)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" context"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    const"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" useContext"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" () "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"=>"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" inject"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(token)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"    return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        provideContext,"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        useContext,"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"const"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"provideContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"useContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"} "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" createContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:"Symbol"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"'SOME_DOMAIN'"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"))"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// parent.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    setup"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),n("span",{style:{color:"#FFAB70"},children:"props"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        const"},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:" context"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" provideContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"({"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            name: "},void 0,!1,void 0,this),n("span",{style:{color:"#9ECBFF"},children:"'tom'"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"            age: "},void 0,!1,void 0,this),n("span",{style:{color:"#79B8FF"},children:"11"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        })"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" () "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"=>"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" context.slots.default"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"    // ..."},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line"},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#6A737D"},children:"// app.js"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    component: {Parent}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#B392F0"},children:"    setup"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"(props, context) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:[n("span",{style:{color:"#E1E4E8"},children:"        const state "},void 0,!1,void 0,this),n("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),n("span",{style:{color:"#B392F0"},children:" useContext"},void 0,!1,void 0,this),n("span",{style:{color:"#E1E4E8"},children:"()"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        return {"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"            state"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,n("span",{className:"line",children:n("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,n("hr",{},void 0,!1,void 0,this),`
`,n("p",{children:"2021 年 9 月 6 日"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}export{s as default};
