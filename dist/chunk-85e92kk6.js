import{e as n,h as a}from"/dist/chunk-n2t7x54v.js";function s(){return a("div",{class:"markdown-body",children:a(n,{children:[a("h1",{children:"JAVA DDD 示例"},void 0,!1,void 0,this),`
`,a("p",{children:"以下是一个基于 Spring Boot 2.7、JPA 和 JDK 8 的 DDD 示例实现，包含核心领域模型、分层架构和代码实现："},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"1. 项目结构（分层架构）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-log",children:[a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"src/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"├── main/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   ├── java/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │   └── com/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │       └── example/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           ├── application/      # 应用层（应用服务）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │   └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderAppService.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           ├── domain/           # 领域层"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           │   ├── model/        # 领域模型"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │   │   ├── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"Order.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │   │   ├── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderItem.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │   │   └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"Address.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           │   └── service/      # 领域服务"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │       └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderService.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           ├── infrastructure/  # 基础设施层"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           │   ├── repository/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │   │   └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderRepositoryImpl.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           │   └── event/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │           │       └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderCreatedEventPublisher.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │           └── interfaces/       # 用户接口层"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   │               └── web/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│   │                   └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"OrderController.java"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"│   └── resources/"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"│       └── "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"application.yml"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"2. 核心领域模型实现"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"2.1 实体（Entity）与聚合根"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// Order.java（聚合根）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Entity"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Table"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"name"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:' "orders"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" Order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Id"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"GeneratedValue"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"strategy"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" GenerationType.IDENTITY)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Long id;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Embedded"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Address address;  "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 值对象"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"OneToMany"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"cascade"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" CascadeType.ALL, "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"orphanRemoval"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" true"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"JoinColumn"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"name"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:' "order_id"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" List<"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"OrderItem"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"> items "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ArrayList<>();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 业务方法：添加订单项"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" void"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" addItem"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(String "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"productId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", BigDecimal "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"price"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"int"},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:" quantity"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        items."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"add"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"new"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderItem"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(productId, price, quantity));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 计算总金额"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" BigDecimal "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"calculateTotal"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" items."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"stream"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"()"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"            ."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"map"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(OrderItem"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"::"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"getSubtotal)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"            ."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"reduce"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(BigDecimal.ZERO, BigDecimal"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"::"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"add);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// OrderItem.java（实体）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Entity"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Table"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"name"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:' "order_items"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderItem"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Id"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"GeneratedValue"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"strategy"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" GenerationType.IDENTITY)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Long id;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" String productId;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" BigDecimal price;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" int"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" quantity;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 计算单项金额"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" BigDecimal "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getSubtotal"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"() {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" price."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"multiply"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(BigDecimal."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"valueOf"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(quantity));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// Address.java（值对象）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Embeddable"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" Address"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" String province;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" String city;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" String street;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"2.2 领域服务"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// OrderService.java"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Service"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderService"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" void"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" validateOrder"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Order "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (order."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getItems"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"()."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"isEmpty"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"()) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"            throw"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" IllegalArgumentException"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:'"订单必须包含至少一个商品"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"3. 基础设施层实现"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"3.1 仓储接口与实现"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// 仓储接口（领域层定义）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" interface"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderRepository"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    Order "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"save"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Order "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    Optional<"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"findById"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Long "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"id"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// 仓储实现（基础设施层）"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Repository"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderRepositoryImpl"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" implements"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderRepository"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"PersistenceContext"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" EntityManager entityManager;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Override"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Transactional"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Order "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"save"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Order "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        entityManager."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"persist"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(order);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" order;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Override"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Optional<"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"findById"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Long "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"id"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" Optional."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"ofNullable"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(entityManager."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"find"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Order.class, id));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"3.2 领域事件发布"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// OrderCreatedEventPublisher.java"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Component"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderCreatedEventPublisher"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Autowired"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ApplicationEventPublisher eventPublisher;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" void"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" publish"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Order "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        eventPublisher."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"publishEvent"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"new"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderCreatedEvent"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"this"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", order."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"()));"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"4. 应用层与用户接口层"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"4.1 应用服务"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// OrderAppService.java"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Service"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"RequiredArgsConstructor"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderAppService"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" OrderRepository orderRepository;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" OrderService orderService;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" OrderCreatedEventPublisher eventPublisher;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"Transactional"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" void"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" createOrder"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(Address "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"address"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", List<"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"OrderItemRequest"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"items"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        Order order "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" new"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" Order"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        order."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"setAddress"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(address);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        items."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"forEach"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(item "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"->"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"            order."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"addItem"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(item."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getProductId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(), item."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getPrice"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(), item."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getQuantity"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"())"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"        );"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        orderService."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"validateOrder"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(order);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        orderRepository."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"save"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(order);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        eventPublisher."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"publish"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(order);  "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 发布领域事件"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"4.2 REST API"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-java",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// OrderController.java"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"RestController"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"RequestMapping"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:'"/orders"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:")"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"RequiredArgsConstructor"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"public"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" OrderController"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    private"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" final"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" OrderAppService appService;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    @"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"PostMapping"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    public"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ResponseEntity<"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"?"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"> "},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createOrder"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(@"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"RequestBody"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" OrderRequest "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"request"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        appService."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createOrder"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(request."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getAddress"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(), request."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"getItems"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"());"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ResponseEntity."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"ok"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"()."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"build"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"5. 配置与依赖"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"5.1 application.yml"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-yaml",children:[a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"spring"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"  datasource"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    url"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"jdbc:mysql://localhost:3306/ddd_demo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    username"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"root"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    password"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"root"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    driver-class-name"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"com.mysql.cj.jdbc.Driver"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"  jpa"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    hibernate"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"      ddl-auto"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"update"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    show-sql"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"true"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"    properties"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"      hibernate"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:":"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#85E89D"},children:"        dialect"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"org.hibernate.dialect.MySQL8Dialect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("h4",{children:a("strong",{children:"5.2 Maven 依赖"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-xml",children:[a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"<"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"dependency"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"groupId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">org.springframework.boot</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"groupId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"artifactId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">spring-boot-starter-data-jpa</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"artifactId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"dependency"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"<"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"dependency"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"groupId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">mysql</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"groupId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"artifactId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">mysql-connector-java</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"artifactId"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"scope"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">runtime</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"scope"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"dependency"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"6. 关键设计说明"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("ol",{children:[`
`,a("li",{children:[`
`,a("p",{children:[a("strong",{children:"聚合根设计"},void 0,!1,void 0,this),`
• `,a("code",{children:"Order"},void 0,!1,void 0,this),"作为聚合根管理",a("code",{children:"OrderItem"},void 0,!1,void 0,this),"的生命周期，通过",a("code",{children:"CascadeType.ALL"},void 0,!1,void 0,this),`实现级联操作。
• 值对象`,a("code",{children:"Address"},void 0,!1,void 0,this),"使用",a("code",{children:"@Embeddable"},void 0,!1,void 0,this),"映射到数据库表。"]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,a("li",{children:[`
`,a("p",{children:[a("strong",{children:"领域事件"},void 0,!1,void 0,this),`
• 使用 Spring 的`,a("code",{children:"ApplicationEventPublisher"},void 0,!1,void 0,this),"实现事件驱动架构。"]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,a("li",{children:[`
`,a("p",{children:[a("strong",{children:"事务管理"},void 0,!1,void 0,this),`
• 应用层通过`,a("code",{children:"@Transactional"},void 0,!1,void 0,this),"控制事务边界，确保业务一致性。"]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,a("li",{children:[`
`,a("p",{children:[a("strong",{children:"分层解耦"},void 0,!1,void 0,this),`
• 基础设施层通过实现领域层定义的仓储接口，实现依赖倒置。`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`]},void 0,!0,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("h3",{children:a("strong",{children:"7. 扩展建议"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("p",{children:["• ",a("strong",{children:"CQRS 优化查询"},void 0,!1,void 0,this),`：对复杂查询可分离命令与查询模型。
• `,a("strong",{children:"限界上下文拆分"},void 0,!1,void 0,this),`：将订单、库存拆分为独立微服务。
• `,a("strong",{children:"集成测试"},void 0,!1,void 0,this),"：使用",a("code",{children:"@DataJpaTest"},void 0,!1,void 0,this),"验证仓储实现。"]},void 0,!0,void 0,this),`
`,a("p",{children:"完整代码可参考[Spring Data JPA 配置示例]。"},void 0,!1,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("ul",{children:[`
`,a("li",{children:"2025-04-12 by DeepSeek R1"},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}export{s as default};
