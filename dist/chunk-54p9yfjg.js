import{e as n,h as a}from"/dist/chunk-scq2q67j.js";function s(){return a("div",{class:"markdown-body",children:a(n,{children:[a("h1",{children:"vhtml 源码阅读理解"},void 0,!1,void 0,this),`
`,a("p",{children:[a("a",{href:"https://www.npmjs.com/package/vhtml",children:"vhtml"},void 0,!1,void 0,this)," 是 ",a("a",{href:"https://github.com/developit",children:"Jason Miller"},void 0,!1,void 0,this)," 很多年前（有近 10 年）实现的一个 jsx 渲染库。Jason Miller 是 ",a("a",{href:"https://preactjs.com/",children:"preact"},void 0,!1,void 0,this)," 的核心开发之一。"]},void 0,!0,void 0,this),`
`,a("p",{children:["jsx 一般配合 vdom 使用。jsx 本质只是函数调用，可以通过自定义的 ",a("code",{children:"h"},void 0,!1,void 0,this)," 函数将 jsx 调用渲染为 HTML。vhtml 的功能是将 jsx 渲染为 HTML 字符串。"]},void 0,!0,void 0,this),`
`,a("h2",{children:"jsx"},void 0,!1,void 0,this),`
`,a("p",{children:["jsx 是一种 javascript 的语法拓展。在编写 jsx 时表现为 js 代码中的 xml。比如 vhtml 的 ",a("a",{href:"http://README.md",children:"README.md"},void 0,!1,void 0,this)," 中的这个例子："]},void 0,!0,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-js",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// import the library:"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"import"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" h "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"from"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" 'vhtml'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// tell babel to transpile JSX to h() calls:"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#6A737D"},children:"/** "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"@jsx"},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:" h */"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// now render JSX to an HTML string!"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" items "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ["},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'one'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'two'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'three'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"];"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"document.body."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"innerHTML"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"div"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" class"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:'"foo"'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"h1"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">Hi!</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"h1"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"p"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">Here is a list of {items."},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"length"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"} items:</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"p"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"ul"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"      {items."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"map"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"item"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" =>"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"        <"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"li"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">{item}</"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"li"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"      ))}"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    </"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"ul"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  </"},void 0,!1,void 0,this),a("span",{style:{color:"#85E89D"},children:"div"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:">"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("p",{children:"javascript 引擎原生不支持 jsx。jsx 需要通过 bundler 或 babel 转换成一般 javascript 代码。上面的代码通过 babel 转换，可以得到这样的 javascript 代码："},void 0,!1,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-js",children:[a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// 格式化后"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"document.body.innerHTML "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:" /*#__PURE__*/"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" React."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createElement"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#9ECBFF"},children:"  'div'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  {"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    class: "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'foo'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  },"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#6A737D"},children:"  /*#__PURE__*/"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" React."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createElement"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'h1'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"null"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'Hi!'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"),"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#6A737D"},children:"  /*#__PURE__*/"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" React."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createElement"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'p'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"null"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'Here is a list of '"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", items."},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"length"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"' items:'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"),"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#6A737D"},children:"  /*#__PURE__*/"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" React."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createElement"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#9ECBFF"},children:"    'ul'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#79B8FF"},children:"    null"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    items."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"map"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"item"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" =>"},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:" /*#__PURE__*/"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" React."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"createElement"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'li'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"null"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", item)),"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  ),"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("p",{children:["可以看出，jsx 转换后就是 ",a("code",{children:"React.createElement"},void 0,!1,void 0,this)," 的函数调用。通过 babel 的配置或 ",a("code",{children:"@jsx"},void 0,!1,void 0,this)," 转译注解，可以将 ",a("code",{children:"React.createElement"},void 0,!1,void 0,this)," 替换为自定义的 ",a("code",{children:"h"},void 0,!1,void 0,this)," 函数。而 vhtml 就提供 ",a("code",{children:"h"},void 0,!1,void 0,this)," 函数的实现。"]},void 0,!0,void 0,this),`
`,a("h2",{children:"vhtml 代码"},void 0,!1,void 0,this),`
`,a("p",{children:["vhtml 的核心代码在 ",a("a",{href:"https://github.com/developit/vhtml/blob/master/src/vhtml.js",children:"https://github.com/developit/vhtml/blob/master/src/vhtml.js"},void 0,!1,void 0,this),"："]},void 0,!0,void 0,this),`
`,a("pre",{className:"shiki github-dark",style:{backgroundColor:"#24292e",color:"#e1e4e8"},tabIndex:"0",children:a("code",{className:"language-js",children:[a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"import"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" emptyTags "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"from"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" './empty-tags'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// empty-tags 中声明非闭合的元素，比如 input、hr 等"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// 转义处理"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" esc"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ="},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:" str"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" =>"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" String"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(str)."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"replace"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"/"},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:`[&<>"']`},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"/"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"g"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"s"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" =>"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" `&${"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"map"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"["},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"s"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"]"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"};`"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:");"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" map "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" { "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'&'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'amp'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'<'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'lt'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'>'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'gt'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:`'"'`},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'quot'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:`"'"`},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:": "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'apos'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" };"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// 如果设置了 dangerouslySetInnerHTML 字段，表示直接保存内容、不进行转义。对于 web 程序，可能会有 XSS 风险"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" setInnerHTMLAttr "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" 'dangerouslySetInnerHTML'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"// jsx 属性和 html 属性之类转换。class、for 是 javascript 的关键字"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" DOMAttributeNames "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  className: "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'class'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  htmlFor: "},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"'for'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:","},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"};"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" sanitized "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {}; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 用于标记是否已经进行转义"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"/** Hyperscript reviver that constructs a sanitized HTML string. */"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"export"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" default"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" function"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" h"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"name"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:", "},void 0,!1,void 0,this),a("span",{style:{color:"#FFAB70"},children:"attrs"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // stack 用于保存第三个参数之后的参数列表"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // h 函数一般是这样调用：h('p', {}, 'text1', 'text2')"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // 第一个参数可能是一个函数或标签名称；第二个参数是属性；余下的标签之间的内容，可能是空也可能是多个"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" stack "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" [],"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" ''"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 结果"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  attrs "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" attrs "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"||"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {}; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 保存元素的属性"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // 倒序存入 stack，后续可以和 .pop() 弹出最后一个存入的数据"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  for"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" i "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" arguments"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"."},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"length"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; i"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"--"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" >"},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" 2"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; ) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    stack."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"push"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"arguments"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"[i]);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // 如果第一参数是函数，说明是一个组件，将 stack 反向排序后，保存到第二个参数 attrs 的 children 字段中，然后调用 name 函数。"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // attrs.children 表示标签的内容"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // Sortof component support!"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"typeof"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" name "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"==="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" 'function'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    attrs.children "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" stack."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"reverse"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"();"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    return"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" name"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(attrs);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // return name(attrs, stack.reverse());"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // 如果 name = 'div'"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (name) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" '<'"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" +"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" name; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// s = '<div'"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 如果有 attrs"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (attrs)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"      // 迭代 attrs 的每个字段"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"      for"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" i "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"in"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" attrs) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:'        // 将非空的字段转换为 key="value" 对'},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (attrs[i] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"!=="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" false"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" &&"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" attrs[i] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"!="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" null"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" &&"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" i "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"!=="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" setInnerHTMLAttr) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"          // className 和 htmlFor 特殊处理一下"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"          // key、value 都进行一次转义，预防 XSS"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"          s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" ` ${"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"DOMAttributeNames"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"["},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"i"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"?"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" DOMAttributeNames"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"["},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"i"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:":"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" esc"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"i"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:")"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:'}="${'},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"esc"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"("},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"attrs"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"["},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"i"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"])"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:'}"`'},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"      }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" '>'"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:`// s = '<div class="xxx">'`},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"  // 如果是单边闭合的标签，忽略这些处理"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (emptyTags."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"indexOf"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(name) "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"==="},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" -"},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"1"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 如果需要直接输出 html"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"    if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (attrs[setInnerHTMLAttr]) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"      s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" attrs[setInnerHTMLAttr].__html; "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 传入 html 内容"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"    }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"    // 处理标签内容"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#F97583"},children:"    else"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"      while"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (stack."},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"length"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:") {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"        // 取出第三个参数"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" child "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" stack."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"pop"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(); "},void 0,!1,void 0,this),a("span",{style:{color:"#6A737D"},children:"// 前面存入的时候已经是倒序入库，所以 .pop() 可以拿出第三个参数"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"        if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (child) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"          // 如果 child 非空，且有 .pop 方法，表示 child 是一个数组"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"          if"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" (child.pop) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"            // 将 child 的每个元素倒序存入 stack"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"            for"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" ("},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"let"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" i "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" child."},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:"length"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; i"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"--"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"; ) {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"              stack."},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:"push"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(child[i]);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"            }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"          } "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"else"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" {"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#6A737D"},children:"            // 拼接"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"            s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" sanitized[child] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"==="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" true"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" ?"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" child "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:":"},void 0,!1,void 0,this),a("span",{style:{color:"#B392F0"},children:" esc"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"(child);"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"          }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"        }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"      }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"    s "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"+="},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" name "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"?"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" `</${"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:"name"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:"}>`"},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:" :"},void 0,!1,void 0,this),a("span",{style:{color:"#9ECBFF"},children:" ''"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"  }"},void 0,!1,void 0,this)},void 0,!1,void 0,this),`
`,a("span",{className:"line"},void 0,!1,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#E1E4E8"},children:"  sanitized[s] "},void 0,!1,void 0,this),a("span",{style:{color:"#F97583"},children:"="},void 0,!1,void 0,this),a("span",{style:{color:"#79B8FF"},children:" true"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:";"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:[a("span",{style:{color:"#F97583"},children:"  return"},void 0,!1,void 0,this),a("span",{style:{color:"#E1E4E8"},children:" s;"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),`
`,a("span",{className:"line",children:a("span",{style:{color:"#E1E4E8"},children:"}"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),`
`,a("h2",{children:"体会"},void 0,!1,void 0,this),`
`,a("p",{children:["大佬的代码总是很简洁实用。首先安全性，XSS 预防；其次 stack 的处理也让人印象深刻。再就是 Array 对象的 ",a("code",{children:".pop"},void 0,!1,void 0,this),"、",a("code",{children:".push"},void 0,!1,void 0,this),"、",a("code",{children:".revert"},void 0,!1,void 0,this)," 方法的使用；vhtml 的核心代码很短，仓库中也配置了单元测试，是一个很完整的项目。"]},void 0,!0,void 0,this),`
`,a("hr",{},void 0,!1,void 0,this),`
`,a("ul",{children:[`
`,a("li",{children:"2023-06-07 初稿"},void 0,!1,void 0,this),`
`]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}export{s as default};
