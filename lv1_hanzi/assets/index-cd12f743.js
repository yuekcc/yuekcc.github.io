(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var et="Expected a function",de=0/0,tt="[object Symbol]",rt=/^\s+|\s+$/g,nt=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,ot=/^0o[0-7]+$/i,st=parseInt,at=typeof g=="object"&&g&&g.Object===Object&&g,ct=typeof self=="object"&&self&&self.Object===Object&&self,ft=at||ct||Function("return this")(),ut=Object.prototype,lt=ut.toString,dt=Math.max,pt=Math.min,W=function(){return ft.Date.now()};function yt(e,t,r){var n,i,o,s,a,u,p=0,T=!1,l=!1,v=!0;if(typeof e!="function")throw new TypeError(et);t=pe(t)||0,U(r)&&(T=!!r.leading,l="maxWait"in r,o=l?dt(pe(r.maxWait)||0,t):o,v="trailing"in r?!!r.trailing:v);function h(c){var y=n,A=i;return n=i=void 0,p=c,s=e.apply(A,y),s}function Xe(c){return p=c,a=setTimeout(M,t),T?h(c):s}function Ye(c){var y=c-u,A=c-p,le=t-y;return l?pt(le,o-A):le}function fe(c){var y=c-u,A=c-p;return u===void 0||y>=t||y<0||l&&A>=o}function M(){var c=W();if(fe(c))return ue(c);a=setTimeout(M,Ye(c))}function ue(c){return a=void 0,v&&n?h(c):(n=i=void 0,s)}function Ze(){a!==void 0&&clearTimeout(a),p=0,n=u=i=a=void 0}function Qe(){return a===void 0?s:ue(W())}function D(){var c=W(),y=fe(c);if(n=arguments,i=this,u=c,y){if(a===void 0)return Xe(u);if(l)return a=setTimeout(M,t),h(u)}return a===void 0&&(a=setTimeout(M,t)),s}return D.cancel=Ze,D.flush=Qe,D}function U(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function gt(e){return!!e&&typeof e=="object"}function ht(e){return typeof e=="symbol"||gt(e)&&lt.call(e)==tt}function pe(e){if(typeof e=="number")return e;if(ht(e))return de;if(U(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=U(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(rt,"");var r=it.test(e);return r||ot.test(e)?st(e.slice(2),r?2:8):nt.test(e)?de:+e}var bt=yt;const mt=Oe(bt);var ye=1/0,Te=9007199254740991,St=17976931348623157e292,ge=0/0,_t=4294967295,vt="[object Arguments]",wt="[object Function]",Ot="[object GeneratorFunction]",K="[object Map]",Tt="[object Object]",he="[object Promise]",J="[object Set]",At="[object String]",jt="[object Symbol]",be="[object WeakMap]",me="[object DataView]",$t=/[\\^$.*+?()[\]{}|]/g,It=/^\s+|\s+$/g,kt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,Pt=/^\[object .+?Constructor\]$/,Et=/^0o[0-7]+$/i,Mt=/^(?:0|[1-9]\d*)$/,oe="\\ud800-\\udfff",Ae="\\u0300-\\u036f\\ufe20-\\ufe23",je="\\u20d0-\\u20f0",$e="\\ufe0e\\ufe0f",Ct="["+oe+"]",X="["+Ae+je+"]",Y="\\ud83c[\\udffb-\\udfff]",Nt="(?:"+X+"|"+Y+")",Ie="[^"+oe+"]",ke="(?:\\ud83c[\\udde6-\\uddff]){2}",xe="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="\\u200d",Ee=Nt+"?",Me="["+$e+"]?",Rt="(?:"+Pe+"(?:"+[Ie,ke,xe].join("|")+")"+Me+Ee+")*",Lt=Me+Ee+Rt,zt="(?:"+[Ie+X+"?",X,ke,xe,Ct].join("|")+")",Ft=RegExp(Y+"(?="+Y+")|"+zt+Lt,"g"),Bt=RegExp("["+Pe+oe+Ae+je+$e+"]"),Vt=parseInt,Dt=typeof g=="object"&&g&&g.Object===Object&&g,Wt=typeof self=="object"&&self&&self.Object===Object&&self,S=Dt||Wt||Function("return this")();function Gt(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Ht(e){return e.split("")}function qt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Ut(e,t){return Gt(t,function(r){return e[r]})}function Kt(e,t){return e?.[t]}function Jt(e){return Bt.test(e)}function Xt(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Yt(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function Zt(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Qt(e,t){return function(r){return e(t(r))}}function er(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}function tr(e){return Jt(e)?rr(e):Ht(e)}function rr(e){return e.match(Ft)||[]}var nr=Function.prototype,z=Object.prototype,G=S["__core-js_shared__"],Se=function(){var e=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ce=nr.toString,F=z.hasOwnProperty,O=z.toString,ir=RegExp("^"+Ce.call(F).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=S.Symbol,H=_e?_e.iterator:void 0,or=z.propertyIsEnumerable,sr=Math.floor,ar=Qt(Object.keys,Object),cr=Math.random,Z=P(S,"DataView"),Q=P(S,"Map"),ee=P(S,"Promise"),te=P(S,"Set"),re=P(S,"WeakMap"),fr=_(Z),ur=_(Q),lr=_(ee),dr=_(te),pr=_(re);function yr(e,t){var r=Re(e)||$r(e)?qt(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||F.call(e,o))&&!(i&&(o=="length"||Ne(o,n)))&&r.push(o);return r}function gr(e,t,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),t!==void 0&&(e=e>=t?e:t)),e}function hr(e){return O.call(e)}function br(e){if(!x(e)||wr(e))return!1;var t=Le(e)||Xt(e)?ir:Pt;return t.test(_(e))}function mr(e){if(!Or(e))return ar(e);var t=[];for(var r in Object(e))F.call(e,r)&&r!="constructor"&&t.push(r);return t}function Sr(e,t){return e+sr(cr()*(t-e+1))}function _r(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function P(e,t){var r=Kt(e,t);return br(r)?r:void 0}var b=hr;(Z&&b(new Z(new ArrayBuffer(1)))!=me||Q&&b(new Q)!=K||ee&&b(ee.resolve())!=he||te&&b(new te)!=J||re&&b(new re)!=be)&&(b=function(e){var t=O.call(e),r=t==Tt?e.constructor:void 0,n=r?_(r):void 0;if(n)switch(n){case fr:return me;case ur:return K;case lr:return he;case dr:return J;case pr:return be}return t});function Ne(e,t){return t=t??Te,!!t&&(typeof e=="number"||Mt.test(e))&&e>-1&&e%1==0&&e<t}function vr(e,t,r){if(!x(r))return!1;var n=typeof t;return(n=="number"?B(r)&&Ne(t,r.length):n=="string"&&t in r)?jr(r[t],e):!1}function wr(e){return!!Se&&Se in e}function Or(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||z;return e===r}function _(e){if(e!=null){try{return Ce.call(e)}catch{}try{return e+""}catch{}}return""}function Tr(e,t,r){var n=-1,i=Er(e),o=i.length,s=o-1;for((r?vr(e,t,r):t===void 0)?t=1:t=gr(Cr(t),0,o);++n<t;){var a=Sr(n,s),u=i[a];i[a]=i[n],i[n]=u}return i.length=t,i}function Ar(e){return Tr(e,_t)}function jr(e,t){return e===t||e!==e&&t!==t}function $r(e){return Ir(e)&&F.call(e,"callee")&&(!or.call(e,"callee")||O.call(e)==vt)}var Re=Array.isArray;function B(e){return e!=null&&kr(e.length)&&!Le(e)}function Ir(e){return se(e)&&B(e)}function Le(e){var t=x(e)?O.call(e):"";return t==wt||t==Ot}function kr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Te}function x(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function se(e){return!!e&&typeof e=="object"}function xr(e){return typeof e=="string"||!Re(e)&&se(e)&&O.call(e)==At}function Pr(e){return typeof e=="symbol"||se(e)&&O.call(e)==jt}function Er(e){if(!e)return[];if(B(e))return xr(e)?tr(e):_r(e);if(H&&e[H])return Yt(e[H]());var t=b(e),r=t==K?Zt:t==J?er:Lr;return r(e)}function Mr(e){if(!e)return e===0?e:0;if(e=Nr(e),e===ye||e===-ye){var t=e<0?-1:1;return t*St}return e===e?e:0}function Cr(e){var t=Mr(e),r=t%1;return t===t?r?t-r:t:0}function Nr(e){if(typeof e=="number")return e;if(Pr(e))return ge;if(x(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=x(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(It,"");var r=xt.test(e);return r||Et.test(e)?Vt(e.slice(2),r?2:8):kt.test(e)?ge:+e}function Rr(e){return B(e)?yr(e):mr(e)}function Lr(e){return e?Ut(e,Rr(e)):[]}var zr=Ar;const Fr=Oe(zr);let ne=Object,m,d=ne.getPrototypeOf,ie=document,N,$,j,ze={isConnected:1},Br=1e3,C,ve={},Vr=d(ze),Fe=d(d),Be=(e,t,r,n)=>(e??(setTimeout(r,n),new Set)).add(t),Ve=(e,t,r)=>{let n=$;$=t;try{return e(r)}catch(i){return console.error(i),r}finally{$=n}},R=e=>e.filter(t=>t._dom?.isConnected),De=e=>C=Be(C,e,()=>{for(let t of C)t._bindings=R(t._bindings),t._listeners=R(t._listeners);C=m},Br),V={get val(){return $?.add(this),this._val},get oldVal(){return $?.add(this),this._oldVal},set val(e){let t=this;if(e!==t._val){t._val=e;let r=[...t._listeners=R(t._listeners)];for(let n of r)He(n.f,n.s,n._dom),n._dom=m;t._bindings.length?N=Be(N,t,Hr):t._oldVal=e}}},We=e=>({__proto__:V,_val:e,_oldVal:e,_bindings:[],_listeners:[]}),Ge=e=>d(e??0)===V,Dr=e=>Ge(e)?e.val:e,Wr=e=>Ge(e)?e.oldVal:e,w=(e,t)=>{let r=new Set,n={f:e},i=j;j=[];let o=Ve(e,r,t);o=(o??ie).nodeType?o:new Text(o);for(let s of r)De(s),s._bindings.push(n);for(let s of j)s._dom=o;return j=i,n._dom=o},He=(e,t=We(),r)=>{let n=new Set,i={f:e,s:t};i._dom=r??j?.push(i)??ze,t.val=Ve(e,n);for(let o of n)De(o),o._listeners.push(i);return t},qe=(e,...t)=>{for(let r of t.flat(1/0)){let n=d(r??0),i=n===V?w(()=>r.val):n===Fe?w(r):r;i!=m&&e.append(i)}return e},Gr=e=>(e._isBindingFunc=1,e),we=e=>new Proxy((t,...r)=>{let[n,...i]=d(r[0]??0)===Vr?r:[{},...r],o=e?ie.createElementNS(e,t):ie.createElement(t);for(let[s,a]of ne.entries(n)){let u=h=>h?ne.getOwnPropertyDescriptor(h,s)??u(d(h)):m,p=t+","+s,T=ve[p]??(ve[p]=u(d(o))?.set??0),l=T?T.bind(o):o.setAttribute.bind(o,s),v=d(a??0);v===V?w(()=>(l(a.val),o)):v===Fe&&(!s.startsWith("on")||a._isBindingFunc)?w(()=>(l(a()),o)):l(a)}return qe(o,...i)},{get:(t,r)=>t.bind(m,r)}),Ue=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),Hr=()=>{let e=[...N].filter(t=>t._val!==t._oldVal);N=m;for(let t of new Set(e.flatMap(r=>r._bindings=R(r._bindings))))Ue(t._dom,w(t.f,t._dom)),t._dom=m;for(let t of e)t._oldVal=t._val},qr=(e,t)=>Ue(e,w(t,e));const E={add:qe,_:Gr,tags:we(),tagsNS:we,state:We,val:Dr,oldVal:Wr,derive:He,hydrate:qr},ae=new Worker("/lv1_hanzi/sql/worker.sql-wasm.js"),Ke=function(){let e=0;return()=>(e+=1,e)}(),L=new Map,I={ready:!1,callbacksBeforeReady:[]};ae.onmessage=e=>{const{id:t,...r}=e.data;L.get(t)(r),L.delete(t)};function Ur(e){return new Promise(t=>{const r=Ke();L.set(r,n=>t(n)),ae.postMessage({id:r,action:"open",buffer:e})})}function Je(e,t=null){return new Promise(r=>{const n=()=>{const i=Ke();L.set(i,o=>r(o)),ae.postMessage({id:i,action:"exec",sql:e,params:t||{}})};I.ready?n():I.callbacksBeforeReady.push(n)})}async function Kr(){const t=await fetch("/lv1_hanzi/hanzi.db").then(r=>r.arrayBuffer());await Ur(t),I.ready=!0,I.callbacksBeforeReady.length>0&&I.callbacksBeforeReady.forEach(r=>r())}const q=[],Jr={lang:"zh-CN",volume:1,rate:1,pitch:1};function Xr(e,t=Jr){const r=window.SpeechSynthesisUtterance,n=window.speechSynthesis,i=new r;i.lang=t.lang,i.volume=t.volume,i.rate=t.rate,i.pitch=t.pitch,i.text=e,n.speak(i)}function Yr(e){q.push(e),setTimeout(()=>{for(;q.length>0;){if(window.speechSynthesis.speaking)continue;const t=q.pop();Xr(t)}})}const{div:f,p:Zr}=E.tags;async function Qr(){const e=await Je("select pos from hanzi");return Fr(e.results[0].values.flat())}async function en(e){const t=await Je("select * from hanzi where pos = $pos",{$pos:e}),r={},n=t.results?.[0].values[0]||[];return t.results?.[0].columns.forEach((i,o)=>{if(i==="explanations"||i==="pinyins"){r[i]=JSON.parse(n[o]??"[]");return}r[i]=n[o]??null}),r}await Kr();const tn=await Qr(),ce=E.state(null),k=E.state({});E.derive(async()=>{const e=tn[ce.val],t=await en(e);k.val=t});ce.val=0;const rn=mt(()=>{const e=k.val.hanzi;Yr(e)},200);function nn(){}function on(e){return Array.isArray(e)?e.map(t=>f({class:"tag"},t)):f("")}function sn(e){if(!Array.isArray(e))return f("");let t=e.join(`
`);return"❶❷❸❹❺❻❼❽❾❿⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴".split("").forEach(n=>{t=t.replaceAll(n,`
${n} `)}),t.split(`
`).map((n,i)=>Zr({"row-index":i},n))}function an({onRead:e,onLookup:t}){return f({class:"top-bar"},f({},f({class:"btn",onclick:t},"查")),f({class:"title"},"一级汉字"),f({},f({class:"btn",onclick:e},"读")))}function cn(){return f({class:"next-button",onclick:()=>{ce.val+=1}},"下一个")}const fn=()=>f({class:"hanzi-container",style:"height: 100vh; max-height: 100vh"},an({onRead:rn,onLookup:nn}),()=>f({class:"hanzi"},k.val.hanzi),()=>f({style:"overflow: auto"},f({class:"explanations"},sn(k.val.explanations)),f({class:"pinyins"},on(k.val.pinyins))),cn());E.add(document.body,fn());
